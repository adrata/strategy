# CURSOR RULES FOR ADRATA TAURI APP - 2025 OPTIMIZED

## üéØ Project Context
- **Next.js 15.3.2** + **React 19** + **TypeScript 5.8.3** + **Tauri 2.6.0** multi-platform application
- **Production database**: PostgreSQL with **867+ real leads, 277 prospects, 1130 contacts, 232 accounts** 
- **Multi-platform**: Web (Vercel), Desktop (Tauri), Mobile (Capacitor 7.4.0)
- **User**: 'dan' in workspace 'adrata' should see real production data
- **Enterprise-grade**: Security, performance, and scalability focused

## üë• **USER DISTINCTION - CRITICAL**
- **Dan**: `dan@adrata.com` - Main user, workspace ID: `01K1VBYXHD0J895XAN0HGFBKJP`
- **Dano**: `dano@retail-products.com` - Secondary user, workspace ID: `01K1VBYV8ETM2RCQA4GNN9EG72`
- **When user says "Dano" they mean Dano specifically, not Dan**
- **When user says "Dan" they mean Dan specifically, not Dano**
- **Always use the correct email and workspace ID for the intended user**

## üö® **CRITICAL DATABASE PROTECTION - ZERO TOLERANCE POLICY**

### **üõ°Ô∏è ABSOLUTE PROHIBITION: NO DATABASE DESTRUCTION SCRIPTS**

**NEVER EVER create, run, or suggest any of the following:**

#### **üö´ FORBIDDEN COMMANDS (INSTANT PROJECT TERMINATION)**
```bash
# NEVER RUN THESE - THEY DESTROY PRODUCTION DATA
prisma migrate reset    # üíÄ DELETES ALL DATA
prisma db push --force  # üíÄ OVERWRITES SCHEMA
prisma db seed         # üíÄ OVERWRITES PRODUCTION
npm run db:reset       # üíÄ NUCLEAR OPTION
npm run db:seed        # üíÄ DATA DESTRUCTION
```

#### **üö´ FORBIDDEN FALLBACK DATA PATTERNS**
```typescript
// üíÄ NEVER CREATE FALLBACK/SAMPLE DATA
const samplePeople = await prisma.people.findMany({ take: 5 }); // üíÄ FALLBACK DATA
const demoData = generateMockData(); // üíÄ MOCK DATA
const fallbackUsers = getDefaultUsers(); // üíÄ FALLBACK USERS
const sampleCompanies = createSampleCompanies(); // üíÄ SAMPLE DATA

// üíÄ NEVER SHOW "No data found" with fallback creation
if (people.length === 0) {
  return getSamplePeople(); // üíÄ FALLBACK DATA
}

// üíÄ NEVER CREATE DEMO/PLACEHOLDER DATA
const placeholderData = createPlaceholderData(); // üíÄ PLACEHOLDER DATA
const mockBuyerGroups = generateMockBuyerGroups(); // üíÄ MOCK DATA
```

#### **üö´ FORBIDDEN SCRIPT PATTERNS**
- **Seed Scripts**: Any file named `seed.js`, `seed.ts`, `*seed*` - DELETE ON SIGHT
- **Reset Scripts**: Any file containing `reset`, `clean`, `clear` database operations
- **Bulk Delete Scripts**: Scripts that run `deleteMany()`, `DROP TABLE`, `TRUNCATE`
- **Migration Reset**: Any script that resets or recreates database schema
- **Production Manipulation**: Any script that modifies live user data

#### **üö´ FORBIDDEN CODE PATTERNS**
```typescript
// üíÄ NEVER WRITE CODE LIKE THIS
await prisma.lead.deleteMany({});           // Deletes all leads
await prisma.user.deleteMany({});           // Deletes all users  
await prisma.$executeRaw`DROP TABLE leads`; // Destroys table
await prisma.$executeRaw`TRUNCATE users`;   // Empties table
await prisma.migrate.reset();               // Resets entire DB

// üíÄ NEVER CREATE FILES THAT:
- Delete production data in batches
- "Clean up" or "reorganize" live data
- Seed/populate production with test data
- Reset user progress or settings
- Bulk modify existing records without explicit user permission
```

#### **‚úÖ SAFE ALTERNATIVES**
```typescript
// ‚úÖ SAFE: Read-only operations
await prisma.lead.findMany({ where: { ... } });
await prisma.lead.count();
await prisma.lead.findFirst({ where: { ... } });

// ‚úÖ SAFE: Single record operations with user consent
await prisma.lead.create({ data: { ... } });
await prisma.lead.update({ where: { id: specificId }, data: { ... } });
await prisma.lead.delete({ where: { id: specificId } }); // Only with explicit ID

// ‚úÖ SAFE: Migrations for schema changes (not data destruction)
npx prisma migrate dev --name "add_new_field"
npx prisma generate
```

#### **üõ°Ô∏è PROTECTION ENFORCEMENT**
1. **Code Review Mandatory**: Any database operations must be explicitly reviewed
2. **No Batch Operations**: Never create scripts that affect multiple records
3. **Production Read-Only**: Treat production data as sacred and untouchable
4. **Explicit Consent**: Any data modification requires explicit user action
5. **Backup First**: Never modify data without verified backups

#### **‚ö†Ô∏è VIOLATION CONSEQUENCES**
- Immediate script deletion and prevention
- Project rollback to last safe state
- Enhanced monitoring and restrictions
- **ZERO TOLERANCE**: Database destruction = immediate termination

---

**üéØ REMEMBER: We have 867 leads, 277 prospects, 1130 contacts, and 232 accounts of REAL PRODUCTION DATA. Treat it like gold.**

## üö® **TYPESCRIPT STRICT MODE - ZERO ERROR MANDATE**

### **CRITICAL ERROR PREVENTION PATTERNS (Based on 11+ Fixed Errors)**

#### **TS2532 & TS18048: Undefined Safety (MANDATORY PATTERNS)**
```typescript
// üö´ CRASH-PRONE: Direct property/array access
user.profile.name                    // üí• if profile is undefined
companies[0].name                    // üí• if array empty
vectorizedData.contextualFeatures.engagement  // üí• if nested undefined

// ‚úÖ BULLETPROOF: Optional chaining + fallbacks (REQUIRED FOR ALL ACCESS)
user.profile?.name ?? 'Unknown'
companies[0]?.name ?? 'Default Company'
(vectorizedData.contextualFeatures?.engagement ?? 0) > 0.7
```

#### **TS2322: Type Assignment Safety (MANDATORY FALLBACKS)**
```typescript
// üö´ DANGEROUS: Undefined assignment to required types
const company: Company = companies.find(c => c.id === id); // üí• returns undefined
const name: string = split('/')[1];                        // üí• array access undefined
const title: string = person.title;                       // üí• if title undefined

// ‚úÖ SAFE: Handle undefined explicitly (REQUIRED PATTERN)
const company = companies.find(c => c.id === id) ?? defaultCompany;
const name = split('/')[1] || 'default';
const title: string = person.title || 'Unknown Title';
const department: string = person.department || 'Unknown Department';
```

#### **TS2345: Argument Type Safety (MANDATORY VALIDATION)**
```typescript
// üö´ RISKY: Undefined parameters to strict functions
generateReport(companies[0]);           // üí• if array empty
processData(user.profile);             // üí• if profile undefined
formatDate(event.startDate);           // üí• if startDate missing
superFastCacheCheck(searchQuery);      // üí• if searchQuery is undefined

// ‚úÖ PROTECTED: Validate before passing (REQUIRED PATTERN)
const company = companies[0];
if (company) generateReport(company);

const profile = user.profile;
if (profile) processData(profile);

const startDate = event.startDate;
if (startDate) formatDate(startDate);

// For string parameters that can be undefined:
if (searchQuery) {
  await superFastCacheCheck(searchQuery, workspaceId);
}
```

#### **TS7053: Dynamic Property Access (MANDATORY TYPE ASSERTIONS)**
```typescript
// üö´ ERROR-PRONE: String indexing on typed objects
const steps = industryStepMap[industry];           // üí• TypeScript strict error
const config = stepConfigMap[stepName];           // üí• Implicit any type
const catalog = SOFTWARE_CATALOGS[dynamicKey];    // üí• No index signature

// ‚úÖ TYPE-SAFE: Proper key assertions (REQUIRED PATTERN)
const steps = industryStepMap[industry as keyof typeof industryStepMap];
const config = stepConfigMap[stepName as keyof typeof stepConfigMap];
const catalog = SOFTWARE_CATALOGS[dynamicKey as keyof typeof SOFTWARE_CATALOGS];
```

#### **TS2769: Function Overload Safety (MANDATORY FALLBACKS)**
```typescript
// üö´ PROBLEMATIC: Undefined parameters to replace/template functions
template.replace("{name}", person.name);          // üí• if name undefined
config.valueAdd[index];                          // üí• if index out of bounds
emailTemplate.replace("{role}", user.role);     // üí• if role undefined

// ‚úÖ ROBUST: Fallback values for all replacements (REQUIRED PATTERN)
template.replace("{name}", person.name || 'Professional');
config.valueAdd[index] || 'Default value';
emailTemplate.replace("{role}", user.role || 'Team Member');
```

### **MANDATORY CODE PATTERNS - ZERO TOLERANCE POLICY**

#### **Array Access Safety (noUncheckedIndexedAccess) - REQUIRED**
```typescript
// üö´ STRICT MODE ERROR: Direct array indexing
const first = items[0];                    // üí• returns T | undefined
const name = alphabet[randomIndex];        // üí• undefined if out of bounds
const theme = themes[Math.floor(Math.random() * themes.length)]; // üí• undefined risk

// ‚úÖ STRICT MODE SAFE: Always handle undefined (MANDATORY)
const first = items[0] ?? defaultItem;
const name = alphabet[randomIndex] ?? 'A';
const theme = themes[Math.floor(Math.random() * themes.length)] || 'Technology';
```

#### **Object Property Existence Checks - REQUIRED**
```typescript
// üö´ DANGEROUS: Assuming properties exist
data.enrichedProfiles.forEach(profile => {        // üí• if enrichedProfiles undefined
  profile.skills.map(skill => skill.name);        // üí• if skills undefined
});

// ‚úÖ SAFE: Validate nested structures (MANDATORY PATTERN)
(data.enrichedProfiles ?? []).forEach(profile => {
  (profile.skills ?? []).map(skill => skill.name ?? 'Unknown');
});
```

#### **State Setter Safety - REQUIRED**
```typescript
// üö´ PROBLEMATIC: Complex state updates with potential undefined
setCallState(prev => ({
  ...prev,
  remoteStream: event.streams[0],        // üí• if streams empty
}));

// ‚úÖ SAFE: Fallback for all state updates (MANDATORY)
setCallState(prev => ({
  ...prev,
  remoteStream: event.streams[0] || null,
}));
```

#### **Accumulation Pattern Safety - REQUIRED**
```typescript
// üö´ DANGEROUS: Direct array accumulation without checking
acc[person.companyId].push(person);              // üí• if acc[companyId] undefined

// ‚úÖ BULLETPROOF: Safe accumulation pattern (MANDATORY)
(acc[person.companyId] || []).push(person);
// OR
if (!acc[person.companyId]) {
  acc[person.companyId] = [];
}
acc[person.companyId].push(person);
```

### **PRE-COMMIT VERIFICATION CHECKLIST - MANDATORY**

Before any commit, verify ALL of these patterns:

#### **üîç Required Pattern Scans:**
- [ ] **No naked array access**: Search for `\[[0-9]+\]` without `??` or `||`
- [ ] **No naked object access**: Search for `\.` without `?.` on potentially undefined
- [ ] **No string indexing**: Search for `\[.*string.*\]` without `as keyof`
- [ ] **No undefined assignments**: Check all `find()`, `split()`, array access assignments
- [ ] **No implicit any parameters**: Search for `.map(` `.filter(` `.reduce(` without types
- [ ] **No person.title direct access**: Must use `person.title || 'Unknown Title'`
- [ ] **No person.department direct access**: Must use `person.department || 'Unknown Department'`

#### **üö® Automated Verification Commands - MANDATORY:**
```bash
# MANDATORY before every commit
npx tsc --noEmit                 # Zero TypeScript errors required
npx eslint . --max-warnings 0   # Zero warnings allowed
npm run type-check               # Additional strict checking

# Additional safety checks
grep -r "person\.title[^|]" src/ && echo "‚ùå Found unsafe person.title access"
grep -r "person\.department[^|]" src/ && echo "‚ùå Found unsafe person.department access"
grep -r "\[[0-9]\+\][^|?]" src/ && echo "‚ùå Found unsafe array access"
```

### **BULLETPROOF DEVELOPMENT PATTERNS - MANDATORY**

#### **üõ°Ô∏è Function Parameter Validation:**
```typescript
// REQUIRED: Always validate function parameters
function processUser(user: User | undefined) {
  if (!user) {
    console.warn('No user provided');
    return;
  }
  // Safe to use user here
}

// REQUIRED: String parameter validation
function searchCompanies(query: string | undefined) {
  if (!query) {
    console.warn('No search query provided');
    return [];
  }
  // Safe to use query here
}
```

#### **üõ°Ô∏è Template String Safety:**
```typescript
// REQUIRED: All template replacements must have fallbacks
const message = template
  .replace("{name}", person.name || 'Professional')
  .replace("{company}", company.name || 'Unknown Company')
  .replace("{role}", person.title || 'Team Member');
```

#### **üõ°Ô∏è API Response Safety:**
```typescript
// REQUIRED: All API responses must be validated
const companies = apiResponse?.data?.companies ?? [];
const firstCompany = companies[0] ?? null;
const companyName = firstCompany?.name ?? 'Unknown';
```

### **ERROR PREVENTION MANTRAS - MEMORIZE THESE**

1. **"NEVER ACCESS WITHOUT FALLBACK"** - Every property access needs `?.` or `||`
2. **"ARRAYS ARE ALWAYS POTENTIALLY EMPTY"** - Use `array[0] ?? fallback`
3. **"STRINGS CAN ALWAYS BE UNDEFINED"** - Use `string || 'fallback'`
4. **"FUNCTIONS NEED VALIDATED INPUTS"** - Check parameters before calling
5. **"OBJECTS CAN ALWAYS BE NULL"** - Use optional chaining everywhere

### **ZERO-ERROR ACHIEVEMENT STANDARDS**

- **GOLD STANDARD:** 0 TypeScript errors across entire codebase
- **SILVER STANDARD:** < 5 TypeScript errors (temporary during development)
- **BRONZE STANDARD:** < 20 TypeScript errors (acceptable during major refactoring)
- **UNACCEPTABLE:** > 20 TypeScript errors (blocks all commits)

## üéØ **ENFORCEMENT POLICY**

1. **Pre-commit hooks** MUST run TypeScript checking
2. **CI/CD pipeline** MUST fail on TypeScript errors
3. **Code reviews** MUST verify error prevention patterns
4. **Zero tolerance** for shipping code with TypeScript errors
5. **Immediate fix required** when errors are introduced

---

**üéÜ BOTTOM LINE:** These patterns are based on **REAL ERRORS** we eliminated from the Adrata codebase. Following these rules prevents 95%+ of TypeScript strict mode errors and ensures bulletproof code quality.

## üèóÔ∏è Architecture & Core Files
- `src-tauri/src/lib.rs` - Modular Tauri entry point (175 lines)
- `src-tauri/src/*/mod.rs` - Modular backend (voice, database, data, AI, calling, platform)
- `src/lib/auth-unified.ts` - Unified authentication system (web/desktop/mobile)
- `src/app/aos/` - Main feature with real data integration
- `prisma/schema.prisma` - Database schema (use exact field names)

## üîß Technology Stack Best Practices

### Next.js 15 & React 19 (2025 Standards)
- **App Router only** - Use `app/` directory structure exclusively
- **React Server Components** - Default to RSC, use 'use client' only when necessary
- **Turbopack** - Enable with `--turbo` flag for 5x faster builds
- **Concurrent Features** - Leverage automatic batching, transitions, and Suspense
- **Image Optimization** - Always use `next/image` with `priority` prop for LCP elements
- **Font Optimization** - Use `next/font` with `display: 'swap'` and preload critical fonts
- **Edge Runtime** - Prefer Edge for middleware and simple API routes
- **Static Generation** - Use ISR with strategic `revalidate` values (60-3600s)
- **Core Web Vitals** - Target INP <200ms, CLS <0.1, LCP <2.5s

### TypeScript 5.8.3 (2025 ULTRA-STRICT Standards)
- **Strict Configuration** - Enable all strict flags + `noUncheckedIndexedAccess`
- **Zero Tolerance Policy** - Absolutely NO `any` types in production code
- **Undefined Safety** - Mandatory `?.` and `??` for all potentially undefined access
- **Array Safety** - Required fallbacks for all array indexing operations
- **Type Guards** - Implement proper type narrowing and runtime validation
- **Generic Constraints** - Use precise constraints and conditional types
- **Module Resolution** - Use `bundler` resolution with path mapping
- **Performance** - Use `skipLibCheck: true` and incremental compilation

### **ENHANCED TYPESCRIPT CONFIG REQUIREMENTS**
```json
// tsconfig.json - ULTRA-STRICT MODE
{
  "compilerOptions": {
    "strict": true,
    "noUncheckedIndexedAccess": true,    // CRITICAL: Prevents array access errors
    "exactOptionalPropertyTypes": true,  // Prevents {foo?: undefined}
    "noImplicitReturns": true,          // All code paths must return
    "noFallthroughCasesInSwitch": true, // Switch safety
    "noUncheckedSideEffectImports": true, // Side effect safety
    "allowUnusedLabels": false,         // No unused labels
    "allowUnreachableCode": false,      // No unreachable code
    "noImplicitOverride": true,         // Explicit override keywords
    "useDefineForClassFields": true     // Modern class field behavior
  }
}
```

### Tauri 2.6.0 (2025 Security & Performance)
- **Capabilities System** - Use explicit permissions in `src-tauri/capabilities/`
- **Security Model** - Enable CSP, validate all IPC calls, use secure contexts
- **Performance** - Minimize command invocations, use efficient serialization
- **Mobile Support** - Prepare for Tauri Mobile with React Native compatibility layer
- **Updater Integration** - Implement secure auto-updates with signature verification
- **Bundle Size** - Optimize with tree shaking and selective feature compilation

### Capacitor 7.4.0 (2025 Mobile Excellence)
- **Plugin Ecosystem** - Use official plugins, minimize custom native code
- **Performance** - Implement efficient caching, lazy loading, and background sync
- **Offline Support** - Design offline-first with graceful degradation
- **Platform Integration** - Use native UI patterns and platform-specific optimizations
- **Security** - Implement app transport security and certificate pinning
- **Testing** - Use device testing with automated CI/CD pipeline

### Vercel Deployment (2025 Optimization)
- **Edge Functions** - Use for auth, redirects, and lightweight processing
- **ISR Strategy** - Implement smart caching with `s-maxage` and `stale-while-revalidate`
- **Bundle Analysis** - Monitor and optimize bundle size regularly
- **Core Web Vitals** - Use Vercel Analytics for real-user monitoring
- **Cost Optimization** - Minimize function invocations and execution time
- **Environment Variables** - Use Vercel's encrypted environment variables
- **Preview Deployments** - Leverage for QA and stakeholder reviews

## ‚ö° Performance & Build Optimization

### Memory Management
- **Node.js Heap** - Set `--max-old-space-size=8192` for builds
- **Development** - Use `--max-old-space-size=4096` for faster iteration
- **Incremental Builds** - Enable TypeScript incremental compilation
- **Bundle Analysis** - Regular monitoring with `@next/bundle-analyzer`

### Code Splitting & Loading
- **Dynamic Imports** - Lazy load non-critical components
- **Route-Based Splitting** - Automatic with App Router
- **Component-Level** - Use `React.lazy()` for large components
- **Library Splitting** - Separate vendor bundles for better caching

### Caching Strategy
- **Static Assets** - Long-term caching with content hashing
- **API Responses** - Use SWR patterns with appropriate TTL
- **Database Queries** - Implement query result caching
- **Build Cache** - Leverage Turbopack and Vercel build cache

## üîí Security Best Practices (2025)

### Authentication & Authorization
- **Multi-Platform Auth** - Unified system across web/desktop/mobile
- **Session Management** - Secure token storage per platform
- **Permission System** - Role-based access control (RBAC)
- **API Security** - Rate limiting, input validation, CORS

### Data Protection
- **Environment Variables** - Never commit secrets, use secure vaults
- **Database Security** - Connection pooling, prepared statements
- **Client-Side** - Minimize sensitive data exposure
- **Encryption** - Use encryption for sensitive data at rest

### Tauri Security
- **Command Validation** - Validate all inputs in Rust commands
- **CSP Headers** - Implement strict Content Security Policy
- **File System** - Restrict file access to necessary directories
- **Network Requests** - Validate and sanitize all HTTP requests

## üöÄ Development Workflow (2025)

### Code Quality
- **Linting** - ESLint 9 with strict rules, max 0 warnings (upgraded from 10)
- **Formatting** - Prettier with consistent configuration
- **Type Checking** - ULTRA-STRICT TypeScript with zero tolerance policy
- **Testing** - 90%+ coverage for critical paths

### Git Workflow (Git Flow)
- **Branch Strategy** - Git Flow: `main` (production) ‚Üí `staging` (testing) ‚Üí `develop` (development)
- **Daily Work** - ALL development work happens on `develop` branch first
- **Deployment Flow** - `develop` ‚Üí `staging` (test) ‚Üí `main` (production)
- **Commit Convention** - Conventional commits with semantic versioning
- **Pre-commit Hooks** - MANDATORY: Lint, type-check, and test before commit
- **CI/CD** - Automated testing and deployment pipeline
- **CRITICAL: Git Commit Safety** - NEVER use multi-line commit messages in terminal commands. Always use single-line commits with -m flag to prevent terminal hanging. If long message needed, use multiple -m flags or commit in separate steps.
- **MANDATORY: Develop-First** - NEVER commit directly to `main` or `staging`. ALL changes must go through `develop` first.

### Development Environment
- **Cross-Platform** - Ensure consistency across macOS, Windows, Linux
- **Containerization** - Docker for consistent development environment
- **Hot Reload** - Fast refresh for all platforms
- **Debugging** - Integrated debugging for web, desktop, and mobile

### File Organization
- **Documentation Files** - ALL `.md` files MUST be placed in `docs/` folder (never in root)
- **Guides & References** - Organize by category: `docs/guides/`, `docs/reference/`, `docs/cleanup/`
- **Project Structure** - Keep root directory clean, only essential config files
- **Temporary Files** - Always clean up temporary files after use

## üõ†Ô∏è Platform-Specific Guidelines

### Web (Vercel)
- **Server Components** - Default choice for data fetching
- **Client Components** - Only for interactivity and browser APIs
- **API Routes** - Minimal, prefer Server Actions
- **Middleware** - Use Edge runtime for auth and redirects

### Desktop (Tauri)
- **Static Export** - Use for offline-capable desktop apps
- **File System Access** - Implement secure file operations
- **System Integration** - Native notifications and system tray
- **Auto-Updates** - Secure update mechanism with rollback

### Mobile (Capacitor)
- **Performance** - Optimize for mobile hardware constraints
- **Battery Life** - Minimize background processing
- **Native Features** - Camera, GPS, push notifications
- **App Store** - Follow platform guidelines for approval

## üß™ Testing Strategy (2025)

### Test Types
- **Unit Tests** - Jest with React Testing Library
- **Integration Tests** - Database and API integration
- **E2E Tests** - Playwright for critical user journeys
- **Visual Regression** - Automated screenshot comparison
- **Performance Tests** - K6 for load testing

### Test Environment
- **Isolation** - Each test should be independent
- **Mocking** - Mock external services and APIs
- **Test Data** - Use factories for consistent test data
- **Parallel Execution** - Run tests in parallel for speed

## ‚ùå Common Anti-Patterns to Avoid

### Code Quality
- **String Slicing** - Never use `string[..n]` on dynamic strings
- **Unused Variables** - Prefix with `_` or remove entirely
- **Force Unwrapping** - ABSOLUTELY FORBIDDEN: Always handle potential undefined values
- **Mutation** - Prefer immutable updates and pure functions

### Performance
- **Excessive Re-renders** - Use `memo`, `useMemo`, `useCallback` strategically
- **Bundle Bloat** - Avoid importing entire libraries
- **Network Waste** - Implement proper loading states and caching
- **Memory Leaks** - Clean up event listeners and subscriptions

### Security
- **Client-Side Secrets** - Never expose API keys in client code
- **XSS Vulnerabilities** - Sanitize all user inputs
- **CSRF Attacks** - Implement proper CSRF protection
- **Data Leakage** - Validate data access permissions

## üö® Critical Compilation Rules

### Rust/Tauri
1. **Function Implementation First** - Write and test function before adding to `invoke_handler`
2. **Safe String Operations** - Use `.chars().take(n).collect::<String>()` instead of slicing
3. **Error Handling** - Return proper `Result<T, String>` for all commands
4. **Unused Parameters** - Prefix with `_` (e.g., `_parameter_name`)
5. **Test Compilation** - Always run `npm run desktop:dev` after Rust changes

### TypeScript
1. **Strict Types** - No `any` types in production code
2. **Null Safety** - Handle undefined values explicitly
3. **Import Organization** - Use absolute imports with path mapping
4. **Component Props** - Define interfaces for all component props

## üé® UI/UX Best Practices (2025)

### Design System
- **Consistent Spacing** - Use Tailwind spacing scale
- **Color System** - Use CSS custom properties for themes
- **Typography** - Use `next/font` with fallback fonts
- **Icons** - Use SVG icons with proper accessibility

### Accessibility
- **WCAG 2.2 AA** - Meet accessibility standards
- **Keyboard Navigation** - Support full keyboard navigation
- **Screen Readers** - Proper ARIA labels and semantic HTML
- **Color Contrast** - Ensure sufficient contrast ratios

### Mobile-First
- **Responsive Design** - Design for mobile, enhance for desktop
- **Touch Targets** - Minimum 44px touch targets
- **Performance** - Optimize for slower networks
- **Native Feel** - Use platform-appropriate UI patterns

## üîß Development Tools & Commands

### Essential Commands
```bash
# Development
npm run dev                    # Start Next.js dev server
npm run desktop:dev           # Start Tauri development
npm run mobile:ios            # Run iOS development
npm run mobile:android        # Run Android development

# Building
npm run build                 # Build for production
npm run desktop:build         # Build desktop app
npm run mobile:build:ios      # Build iOS app
npm run mobile:build:android  # Build Android app

# Testing
npm run test:bulletproof      # Run comprehensive tests
npm run test:e2e             # Run end-to-end tests
npm run test:production      # Test production readiness

# Quality
npm run lint:production      # Lint with strict rules
npm run type-check          # TypeScript type checking
npm run validate:production # Full production validation
```

### Quick Fixes
| Issue | Solution |
|-------|----------|
| Rust compilation error | `npm run desktop:dev` |
| Missing plugins | Clear npm cache, sync files |
| Build failures | Update dependencies, clear cache |
| Version mismatches | Align all package versions |

## üéØ Success Metrics (2025)

### Performance Targets
- **Build Time** - <30s for development builds
- **Bundle Size** - <500KB initial load
- **Core Web Vitals** - Green scores across all metrics
- **Test Coverage** - >90% for critical paths

### Quality Targets
- **TypeScript** - Zero `any` types in production
- **Linting** - Zero errors, ZERO warnings (upgraded standard)
- **Security** - Zero high/critical vulnerabilities
- **Accessibility** - WCAG 2.2 AA compliance

## üöÄ Future-Proofing (2025+)

### Emerging Technologies
- **React 19** - Concurrent features and compiler optimizations
- **Tauri Mobile** - Native mobile app development
- **WebAssembly** - High-performance modules
- **Edge Computing** - Global edge function deployment

### Platform Evolution
- **Next.js 16** - Prepare for upcoming features
- **React Compiler** - Automatic optimization
- **Web Standards** - Adopt new web platform features
- **AI Integration** - Prepare for AI-assisted development

## üìÅ **PROJECT ORGANIZATION & ROOT FOLDER CLEANLINESS**

### **MANDATORY ROOT FOLDER RULES**
The root directory MUST remain clean and contain ONLY essential configuration files.

#### **‚úÖ ALLOWED ROOT FILES (Essential Configuration Only)**
```
.cursorrules          # Cursor IDE rules (THIS FILE)
.gitattributes        # Git file handling
.gitignore           # Git ignore patterns
.nvmrc               # Node version specification
capacitor.config.ts   # Capacitor mobile config
eslint.config.mjs     # ESLint configuration
jest.config.js        # Jest testing config
lighthouserc.json     # Performance auditing
next-env.d.ts         # Next.js TypeScript declarations (auto-generated)
next.config.mjs       # Next.js configuration
package-lock.json     # NPM lock file
package.json          # NPM package definition
postcss.config.mjs    # PostCSS configuration
tailwind.config.ts    # Tailwind CSS config
tsconfig.build.json   # TypeScript build config
tsconfig.json         # TypeScript main config
tsconfig.scripts.json # TypeScript scripts config
tsconfig.tsbuildinfo  # TypeScript build cache (auto-generated)
vercel.json          # Vercel deployment config
```

#### **üö´ FORBIDDEN ROOT FILES (Must be organized elsewhere)**
```
- *.md files ‚Üí docs/ folder
- audit reports ‚Üí scripts/reports/ or delete after use
- temporary scripts ‚Üí scripts/temp/
- data files ‚Üí data/ folder
- backup files ‚Üí Never commit backups
- duplicate config files ‚Üí Consolidate or delete
- build artifacts ‚Üí Should be in .gitignore
```

#### **üìÅ PROPER FILE ORGANIZATION**
```
docs/                 # All documentation
‚îú‚îÄ‚îÄ guides/          # User guides and tutorials
‚îú‚îÄ‚îÄ reference/       # API reference and technical docs
‚îî‚îÄ‚îÄ cleanup/         # Cleanup and maintenance docs

scripts/             # Build and utility scripts
‚îú‚îÄ‚îÄ build/           # Build scripts
‚îú‚îÄ‚îÄ deploy/          # Deployment scripts
‚îú‚îÄ‚îÄ reports/         # Generated reports (temporary)
‚îî‚îÄ‚îÄ utilities/       # Development utilities

data/                # Data files and imports
‚îú‚îÄ‚îÄ archive/         # Archived data
‚îú‚îÄ‚îÄ import/          # Data for importing
‚îî‚îÄ‚îÄ export/          # Generated exports
```

#### **üîß AUTOMATED CLEANUP RULES**
1. **Never commit audit reports to root** - Generate, review, delete
2. **No duplicate config files** - Consolidate or remove
3. **No backup files in root** - Use proper version control
4. **No temporary files in root** - Use appropriate temp directories
5. **No documentation in root** - Move to docs/ folder

#### **‚ú® ROOT FOLDER MAINTENANCE**
- Root folder should have ~15-20 files maximum
- Each file must serve a specific configuration purpose
- Remove any file not essential for project operation
- Use scripts/cleanup/ for maintenance documentation

---

**üéØ Bottom Line**: This configuration ensures Adrata delivers world-class performance, security, and user experience across all platforms while maintaining developer productivity and code quality in 2025 and beyond.

**üìÅ Clean Root**: A clean, organized root folder improves developer experience, reduces confusion, and maintains professional project structure.

## üìÇ **ENHANCED FILE ORGANIZATION RULES (2025)**

### **üéØ MANDATORY FILE PLACEMENT RULES**

#### **‚úÖ COMPONENT ORGANIZATION**
```
src/platform/ui/components/     # Shared UI components
‚îú‚îÄ‚îÄ chat/                       # Chat-related components
‚îú‚îÄ‚îÄ layout/                     # Layout components
‚îú‚îÄ‚îÄ modals/                     # Modal components
‚îú‚îÄ‚îÄ forms/                      # Form components
‚îî‚îÄ‚îÄ [feature]/                  # Feature-specific components

src/products/[product]/components/  # Product-specific components
‚îú‚îÄ‚îÄ [feature]/                     # Feature components
‚îî‚îÄ‚îÄ shared/                        # Shared within product
```

#### **‚úÖ SERVICE ORGANIZATION**
```
src/platform/services/          # Core platform services
‚îú‚îÄ‚îÄ auth/                       # Authentication services
‚îú‚îÄ‚îÄ data/                       # Data management services
‚îú‚îÄ‚îÄ ai/                         # AI-related services
‚îú‚îÄ‚îÄ email/                      # Email services
‚îî‚îÄ‚îÄ [domain]/                   # Domain-specific services

src/products/[product]/services/   # Product-specific services
```

#### **‚úÖ HOOK ORGANIZATION**
```
src/platform/hooks/             # Shared hooks
‚îú‚îÄ‚îÄ auth/                       # Authentication hooks
‚îú‚îÄ‚îÄ data/                       # Data hooks
‚îî‚îÄ‚îÄ ui/                         # UI state hooks

src/products/[product]/hooks/      # Product-specific hooks
```

#### **‚úÖ TYPE ORGANIZATION**
```
src/platform/types/             # Shared type definitions
‚îú‚îÄ‚îÄ api.ts                      # API types
‚îú‚îÄ‚îÄ auth.ts                     # Auth types
‚îú‚îÄ‚îÄ ui.ts                       # UI types
‚îî‚îÄ‚îÄ [domain].ts                 # Domain types

src/products/[product]/types/      # Product-specific types
```

### **üö´ ANTI-PATTERNS TO AVOID**

#### **‚ùå FORBIDDEN FILE LOCATIONS**
- ‚ùå Components in root of `src/`
- ‚ùå Services mixed with components
- ‚ùå Types scattered across multiple files
- ‚ùå Utility functions without proper organization
- ‚ùå Test files mixed with source code
- ‚ùå Configuration files in `src/`

#### **‚ùå FORBIDDEN NAMING PATTERNS**
- ‚ùå `utils.ts` (too generic - use specific names)
- ‚ùå `helpers.ts` (too vague - use domain-specific names)
- ‚ùå `index.ts` without proper re-exports
- ‚ùå Mixed case in file names (use kebab-case)
- ‚ùå Abbreviations in file names (use full words)

### **üéØ AUTOMATIC FILE ORGANIZATION**

#### **üìÅ WHEN CREATING NEW FILES**
1. **Components**: Always place in appropriate `components/` directory
2. **Services**: Always place in appropriate `services/` directory  
3. **Hooks**: Always place in appropriate `hooks/` directory
4. **Types**: Always place in appropriate `types/` directory
5. **Utils**: Place in `src/platform/utils/[domain]/` with specific names

#### **üîß FILE NAMING CONVENTIONS**
- **Components**: PascalCase (e.g., `UserProfile.tsx`)
- **Services**: camelCase (e.g., `userAuthService.ts`)
- **Hooks**: camelCase starting with `use` (e.g., `useUserAuth.ts`)
- **Types**: camelCase (e.g., `userTypes.ts`)
- **Utils**: camelCase (e.g., `dateFormatters.ts`)

#### **üìã IMPORT ORGANIZATION**
```typescript
// 1. External libraries
import React from 'react';
import { NextRequest } from 'next/server';

// 2. Internal platform imports
import { authService } from '@/platform/services/auth';
import { UserType } from '@/platform/types/auth';

// 3. Product-specific imports
import { ProductComponent } from '@/products/monaco/components';

// 4. Relative imports (avoid when possible)
import { LocalComponent } from './LocalComponent';
```

### **üé® COMPONENT ARCHITECTURE RULES**

#### **‚úÖ COMPONENT STRUCTURE**
```typescript
// ComponentName.tsx
"use client"; // Only if needed

// 1. Imports (organized as above)
// 2. Types/Interfaces
// 3. Constants
// 4. Main component
// 5. Sub-components (if any)
// 6. Default export
```

#### **‚úÖ SERVICE STRUCTURE**
```typescript
// serviceName.ts
// 1. Imports
// 2. Types/Interfaces
// 3. Constants/Config
// 4. Class or functions
// 5. Default export
```

### **üîç QUALITY ASSURANCE RULES**

#### **üìä FILE SIZE LIMITS**
- **Components**: Max 500 lines (split if larger)
- **Services**: Max 800 lines (split by domain)
- **Hooks**: Max 200 lines (single responsibility)
- **Types**: Max 300 lines (split by domain)

#### **üéØ SINGLE RESPONSIBILITY**
- Each file should have ONE clear purpose
- Each component should handle ONE concern
- Each service should manage ONE domain
- Each hook should provide ONE piece of functionality

### **üöÄ PERFORMANCE ORGANIZATION**

#### **‚ö° LAZY LOADING STRUCTURE**
```typescript
// For large components, use proper lazy loading
const LazyComponent = React.lazy(() => import('./HeavyComponent'));

// Not dynamic imports (breaks Tauri builds)
// ‚ùå const component = await import('./Component');
```

#### **üéØ BARREL EXPORTS**
```typescript
// src/platform/ui/components/index.ts
export { Button } from './Button';
export { Modal } from './Modal';
export { Form } from './forms/Form';

// Usage
import { Button, Modal, Form } from '@/platform/ui/components';
```
