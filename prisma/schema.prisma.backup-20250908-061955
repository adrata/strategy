generator client {
  provider   = "prisma-client-js"
  engineType = "binary"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model BuyerGroupToPerson {
  A String
  B String

  @@id([A, B], map: "_BuyerGroupToPerson_AB_pkey")
  @@map("_BuyerGroupToPerson")
}

model ContactToOpportunity {
  A String
  B String

  @@id([A, B], map: "_ContactToOpportunity_AB_pkey")
  @@map("_ContactToOpportunity")
}

model EmailToAccount {
  A String
  B String

  @@id([A, B], map: "_EmailToAccount_AB_pkey")
  @@map("_EmailToAccount")
}

model EmailToContact {
  A String
  B String

  @@id([A, B], map: "_EmailToContact_AB_pkey")
  @@map("_EmailToContact")
}

model EmailToLead {
  A String
  B String

  @@id([A, B], map: "_EmailToLead_AB_pkey")
  @@map("_EmailToLead")
}

model EmailToOpportunity {
  A String
  B String

  @@id([A, B], map: "_EmailToOpportunity_AB_pkey")
  @@map("_EmailToOpportunity")
}

model EmailToPipelineExecution {
  A String
  B String

  @@id([A, B], map: "_EmailToPipelineExecution_AB_pkey")
  @@map("_EmailToPipelineExecution")
}

model EmailToProspect {
  A String
  B String

  @@id([A, B], map: "_EmailToProspect_AB_pkey")
  @@map("_EmailToProspect")
}

model EmailToPerson {
  A String
  B String

  @@id([A, B], map: "_EmailToPerson_AB_pkey")
  @@map("_EmailToPerson")
}

model EmailToCompany {
  A String
  B String

  @@id([A, B], map: "_EmailToCompany_AB_pkey")
  @@map("_EmailToCompany")
}

model ProspectOpportunities {
  A String
  B String

  @@id([A, B], map: "_ProspectOpportunities_AB_pkey")
  @@map("_ProspectOpportunities")
}

model accounts {
  id                    String          @id @default(ulid())
  workspaceId           String          @db.VarChar(30)
  assignedUserId        String?         @db.VarChar(30)
  name                  String
  legalName             String?
  tradingName           String?
  localName             String?
  website               String?
  email                 String?
  phone                 String?
  fax                   String?
  address               String?
  city                  String?
  state                 String?
  country               String?
  postalCode            String?         @db.VarChar(20)
  industry              String?
  sector                String?
  size                  String?         @db.VarChar(100)
  revenue               Float?
  currency              String          @default("USD") @db.VarChar(3)
  registrationNumber    String?
  taxId                 String?
  vatNumber             String?
  description           String?
  notes                 String?
  tags                  String[]        @default([])
  customFields          Json?
  preferredLanguage     String?         @db.VarChar(10)
  timezone              String?         @db.VarChar(50)
  createdAt             DateTime        @default(now())
  updatedAt             DateTime
  deletedAt             DateTime?
  accountType           String?         @db.VarChar(50)
  primaryContact        String?
  tier                  String?         @db.VarChar(20)
  externalId            String?
  vertical              String?         @db.VarChar(50)
  zohoId                String?         @db.VarChar(50)
  approvalProcess       String?         @default("Committee") @db.VarChar(30)
  budgetCycle           String?         @default("Annual") @db.VarChar(20)
  businessChallenges    String[]        @default([])
  businessPriorities    String[]        @default([])
  competitiveAdvantages String[]        @default([])
  decisionTimeline      String?         @default("3-6 months") @db.VarChar(20)
  growthOpportunities   String[]        @default([])
  growthPotential       String?         @default("High") @db.VarChar(20)
  keyInfluencers        String?         @default("C-Level") @db.VarChar(30)
  marketPosition        String?         @default("Established") @db.VarChar(30)
  marketThreats         String[]        @default([])
  relationshipStrength  String?         @default("Good") @db.VarChar(20)
  riskLevel             String?         @default("Low") @db.VarChar(20)
  strategicInitiatives  String[]        @default([])
  successMetrics        String[]        @default([])
  companyId             String?
  company               company?        @relation(fields: [companyId], references: [id])
  clients               clients[]
  contacts              contacts[]
  opportunities         opportunities[]
}

model activities {
  id             String    @id @default(ulid())
  workspaceId    String    @db.VarChar(30)
  userId         String    @db.VarChar(30)
  leadId         String?   @db.VarChar(30)
  opportunityId  String?   @db.VarChar(30)
  accountId      String?   @db.VarChar(30)
  contactId      String?   @db.VarChar(30)
  type           String    @db.VarChar(30)
  subject        String
  description    String?
  outcome        String?
  scheduledAt    DateTime?
  scheduledDate  DateTime?
  completedAt    DateTime?
  duration       Int?
  status         String    @default("planned") @db.VarChar(20)
  priority       String    @default("normal") @db.VarChar(10)
  attachments    Json?
  metadata       Json?
  createdAt      DateTime  @default(now())
  updatedAt      DateTime
  externalId     String?
  prospectId     String?   @db.VarChar(30)
  assignedUserId String?   @db.VarChar(30)
  campaignType   String?   @db.VarChar(50)
  contacts       contacts? @relation(fields: [contactId], references: [id])
}

model agency_users {
  id                String   @id @default(ulid())
  userId            String   @db.VarChar(30)
  agencyWorkspaceId String
  role              String   @default("recruiter") @db.VarChar(50)
  permissions       Json?
  isActive          Boolean  @default(true)
  createdAt         DateTime @default(now())
  updatedAt         DateTime
}

model agency_workspaces {
  id            String   @id @default(ulid())
  name          String   @db.VarChar(255)
  slug          String   @db.VarChar(100)
  agencyOwnerId String   @db.VarChar(30)
  settings      Json?
  isActive      Boolean  @default(true)
  branding      Json?
  permissions   Json?
  createdAt     DateTime @default(now())
  updatedAt     DateTime
}

model api_cost_tracking {
  id            String   @id @default(ulid())
  session_id    String?
  api_name      String
  requests_made Int      @default(0)
  cost_incurred Decimal  @default(0) @db.Decimal(10, 4)
  success_count Int      @default(0)
  failure_count Int      @default(0)
  user_id       String
  workspace_id  String
  date          DateTime @default(now()) @db.Date
  created_at    DateTime @default(now())
}

model api_usage_metrics {
  id              String   @id @default(ulid())
  workspaceId     String   @db.VarChar(30)
  userId          String?  @db.VarChar(30)
  apiKey          String?  @db.VarChar(100)
  endpoint        String   @db.VarChar(200)
  method          String   @db.VarChar(10)
  requestCount    Int      @default(1)
  responseTime    Float?
  errorCount      Int      @default(0)
  quotaUsed       Int      @default(0)
  dataTransferred Int      @default(0)
  periodStart     DateTime
  periodEnd       DateTime
}

model business_impact_predictions {
  id                 String   @id @default(ulid())
  workspaceId        String
  leadId             String?
  companyId          String?
  actionType         String
  actionData         Json
  predictedOutcome   String
  predictedValue     Float?
  confidence         Float
  businessStage      String
  kpiCategory        String
  reasoning          Json
  actualOutcome      String?
  actualValue        Float?
  predictionAccuracy Float?
  createdAt          DateTime @default(now())
  updatedAt          DateTime
  prospectId         String?
}

model business_kpis {
  id                String   @id @default(ulid())
  workspaceId       String
  kpiName           String
  kpiCategory       String
  currentValue      Float
  targetValue       Float?
  previousValue     Float?
  changePercent     Float?
  measurementPeriod String
  lastCalculated    DateTime @default(now())
  createdAt         DateTime @default(now())
  updatedAt         DateTime
}

model cache_metrics {
  id              String   @id @default(ulid())
  workspaceId     String   @db.VarChar(30)
  cacheKey        String   @db.VarChar(200)
  cacheType       String   @db.VarChar(50)
  hitCount        Int      @default(0)
  missCount       Int      @default(0)
  avgResponseTime Float?
  lastAccessed    DateTime @default(now())
  dataSize        Int?
  ttl             Int?
}

model candidate_touchpoints {
  id          String   @id @default(ulid())
  candidateId String
  type        String   @db.VarChar(50)
  date        DateTime @default(now())
  notes       String?
  outcome     String?  @db.VarChar(50)
  nextAction  String?  @db.VarChar(255)
  createdAt   DateTime @default(now())
  updatedAt   DateTime
}

model candidates {
  id                 String   @id @default(ulid())
  firstName          String   @db.VarChar(100)
  lastName           String   @db.VarChar(100)
  email              String   @db.VarChar(255)
  phone              String?  @db.VarChar(50)
  location           Json?
  currentTitle       String   @db.VarChar(255)
  currentCompany     String   @db.VarChar(255)
  experience         Int      @default(0)
  expectedSalary     Decimal? @db.Decimal(10, 2)
  currentSalary      Decimal? @db.Decimal(10, 2)
  currency           String   @default("USD") @db.VarChar(3)
  skills             String[] @default([])
  certifications     String[] @default([])
  education          Json[]   @default([])
  status             String   @default("sourced") @db.VarChar(50)
  stage              String?  @db.VarChar(100)
  appliedJobs        String[] @default([])
  clientCompanyId    String?  @db.VarChar(30)
  recruiterAssigned  String   @db.VarChar(30)
  workspaceId        String   @db.VarChar(30)
  monacoIntelligence Json?
  notes              String?
  createdAt          DateTime @default(now())
  updatedAt          DateTime
}

model client_accounts {
  id                String    @id @default(ulid())
  name              String    @db.VarChar(255)
  agencyWorkspaceId String
  workspaceId       String    @db.VarChar(30)
  permissions       Json?
  isActive          Boolean   @default(true)
  contractStart     DateTime?
  contractEnd       DateTime?
  monthlyFee        Decimal?  @db.Decimal(10, 2)
  commissionRate    Decimal?  @db.Decimal(5, 2)
  settings          Json?
  branding          Json?
  createdAt         DateTime  @default(now())
  updatedAt         DateTime
}

model client_users {
  id              String   @id @default(ulid())
  userId          String   @db.VarChar(30)
  clientAccountId String
  role            String   @default("hiring_manager") @db.VarChar(50)
  permissions     Json?
  isActive        Boolean  @default(true)
  createdAt       DateTime @default(now())
  updatedAt       DateTime
}

model clients {
  id                       String    @id @default(ulid())
  workspaceId              String    @db.VarChar(30)
  accountId                String    @db.VarChar(30)
  customerSince            DateTime
  customerStatus           String    @default("active") @db.VarChar(20)
  tier                     String?   @db.VarChar(20)
  segment                  String?   @db.VarChar(50)
  totalLifetimeValue       Float     @default(0)
  avgDealSize              Float     @default(0)
  dealCount                Int       @default(0)
  lastDealValue            Float     @default(0)
  annualRecurringRevenue   Float     @default(0)
  projectedAnnualValue     Float     @default(0)
  contactCount             Int       @default(0)
  activityCount            Int       @default(0)
  emailCount               Int       @default(0)
  meetingCount             Int       @default(0)
  callCount                Int       @default(0)
  lastEngagementDate       DateTime?
  lastDealDate             DateTime?
  healthScore              Float     @default(75)
  expansionProbability     Float     @default(50)
  churnRisk                Float     @default(25)
  loyaltyScore             Float     @default(60)
  engagementScore          Float     @default(50)
  avgDealCycle             Int       @default(0)
  preferredProducts        String[]  @default([])
  seasonalPatterns         Json?
  communicationPreferences Json?
  buyingPatterns           Json?
  growthTrend              String?   @db.VarChar(20)
  retentionProbability     Float     @default(80)
  upsellPotential          Float     @default(50)
  crossSellOpportunities   String[]  @default([])
  nextBestAction           String?
  nextBestActionScore      Float     @default(0)
  nextBestActionDate       DateTime?
  renewalDate              DateTime?
  expansionOpportunity     String?
  onboardingDate           DateTime?
  firstPurchaseDate        DateTime?
  lastPurchaseDate         DateTime?
  nextExpectedPurchase     DateTime?
  contractEndDate          DateTime?
  customerType             String?   @db.VarChar(30)
  riskLevel                String    @default("low") @db.VarChar(20)
  priority                 String    @default("medium") @db.VarChar(20)
  tags                     String[]  @default([])
  satisfactionScore        Float?
  npsScore                 Int?
  supportTicketCount       Int       @default(0)
  escalationCount          Int       @default(0)
  lastCalculatedAt         DateTime  @default(now())
  calculationVersion       String    @default("1.0") @db.VarChar(10)
  relationshipStrength     String?   @default("Good") @db.VarChar(20)
  referralsProvided        Int       @default(0)
  caseStudyParticipation   Boolean   @default(false)
  trustLevel               String?   @default("High") @db.VarChar(20)
  advocacyLevel            String?   @default("Promoter") @db.VarChar(20)
  clientAnniversary        DateTime?
  accountManager           String?
  successManager           String?
  executiveSponsor         String?
  meetingFrequency         String?   @default("Monthly") @db.VarChar(20)
  roiAchieved              Float?    @default(240)
  timeToValue              Int?      @default(45)
  dailyActiveUsers         Int       @default(0)
  featureAdoption          Float?    @default(0.78)
  costSavings              Float?    @default(0)
  efficiencyGain           Float?    @default(0.35)
  revenueImpact            Float?    @default(0)
  timeSaved                String?   @default("20 hrs/week") @db.VarChar(20)
  ninetyDayGoals           String[]  @default([])
  annualObjectives         String[]  @default([])
  successRisks             String[]  @default([])
  renewalProbability       Float?    @default(0.95)
  contractValue            Float?    @default(0)
  createdAt                DateTime  @default(now())
  updatedAt                DateTime
  deletedAt                DateTime?
  companyId                String?
  personId                 String?
  accounts                 accounts  @relation(fields: [accountId], references: [id])
  company                  company?  @relation(fields: [companyId], references: [id])
  person                   person?   @relation(fields: [personId], references: [id])
}

model contacts {
  id                    String       @id @default(ulid())
  workspaceId           String       @db.VarChar(30)
  accountId             String?      @db.VarChar(30)
  assignedUserId        String?      @db.VarChar(30)
  firstName             String       @db.VarChar(100)
  lastName              String       @db.VarChar(100)
  middleName            String?      @db.VarChar(100)
  fullName              String       @db.VarChar(200)
  displayName           String?      @db.VarChar(200)
  salutation            String?      @db.VarChar(50)
  suffix                String?      @db.VarChar(50)
  jobTitle              String?      @db.VarChar(300)
  department            String?      @db.VarChar(200)
  seniority             String?      @db.VarChar(50)
  email                 String?      @db.VarChar(300)
  workEmail             String?      @db.VarChar(300)
  personalEmail         String?      @db.VarChar(300)
  secondaryEmail        String?      @db.VarChar(300)
  phone                 String?
  mobilePhone           String?
  workPhone             String?
  linkedinUrl           String?      @db.VarChar(500)
  twitterHandle         String?      @db.VarChar(100)
  address               String?      @db.VarChar(500)
  city                  String?      @db.VarChar(100)
  state                 String?      @db.VarChar(100)
  country               String?      @db.VarChar(100)
  postalCode            String?      @db.VarChar(50)
  dateOfBirth           DateTime?
  gender                String?      @db.VarChar(20)
  notes                 String?
  bio                   String?
  tags                  String[]     @default([])
  customFields          Json?
  preferredLanguage     String?      @db.VarChar(10)
  timezone              String?      @db.VarChar(50)
  status                String       @default("active") @db.VarChar(20)
  lastEnriched          DateTime?
  enrichmentSources     String[]     @default([])
  emailVerified         Boolean      @default(false)
  phoneVerified         Boolean      @default(false)
  mobileVerified        Boolean      @default(false)
  enrichmentScore       Float?
  emailConfidence       Float?
  phoneConfidence       Float?
  dataCompleteness      Float?
  createdAt             DateTime     @default(now())
  updatedAt             DateTime
  personId              String?
  deletedAt             DateTime?
  externalId            String?
  vertical              String?      @db.VarChar(100)
  zohoId                String?      @db.VarChar(100)
  communicationStyle    String?      @default("Professional") @db.VarChar(100)
  decisionMakingStyle   String?      @default("Analytical") @db.VarChar(100)
  hobbies               String[]     @default([])
  interests             String[]     @default([])
  personalGoals         String[]     @default([])
  professionalGoals     String[]     @default([])
  workAnniversary       DateTime?
  buyerGroupRole        String?      @db.VarChar(100)
  coresignalCompanyId   String?      @db.VarChar(100)
  coresignalEmployeeId  String?      @db.VarChar(100)
  decisionMakingPower   String?      @db.VarChar(100)
  discoverySource       String?      @db.VarChar(100)
  efficiencyFocus       String?      @db.VarChar(50)
  seniorityScore        Int?         @default(0)
  targetPriority        Int?         @default(50)
  directDialPhone       String?      @db.VarChar(50)
  mobilePhoneVerified   Boolean?     @default(false)
  phone1                String?      @db.VarChar(50)
  phone1Extension       String?      @db.VarChar(10)
  phone1Type            String?      @db.VarChar(20)
  phone1Verified        Boolean?     @default(false)
  phone2                String?      @db.VarChar(50)
  phone2Extension       String?      @db.VarChar(10)
  phone2Type            String?      @db.VarChar(20)
  phone2Verified        Boolean?     @default(false)
  phoneDataQuality      Int?         @default(0)
  phoneEnrichmentDate   DateTime?
  phoneEnrichmentSource String?      @db.VarChar(50)
  workPhoneVerified     Boolean?     @default(false)
  source                String?      @db.VarChar(100)
  activities            activities[]
  accounts              accounts?    @relation(fields: [accountId], references: [id])
  person                person?      @relation(fields: [personId], references: [id])

  @@index([buyerGroupRole], map: "idx_contacts_buyer_group_role")
  @@index([decisionMakingPower], map: "idx_contacts_decision_power")
  @@index([directDialPhone], map: "idx_contacts_direct_dial")
  @@index([phone1], map: "idx_contacts_phone1")
  @@index([phone2], map: "idx_contacts_phone2")
  @@index([phone1Verified, phone2Verified], map: "idx_contacts_phone_verified")
  @@index([seniorityScore(sort: Desc), targetPriority(sort: Desc)], map: "idx_contacts_seniority_priority")
}

model data_access_logs {
  id             String   @id @default(ulid())
  workspaceId    String   @db.VarChar(30)
  userId         String?  @db.VarChar(30)
  entityType     String   @db.VarChar(50)
  entityId       String   @db.VarChar(30)
  accessType     String   @db.VarChar(20)
  fieldsAccessed String[] @default([])
  accessMethod   String   @db.VarChar(20)
  sourceIp       String?  @db.Inet
  userAgent      String?
  sessionId      String?
  businessReason String?
  duration       Int?
  timestamp      DateTime @default(now())
}

model data_quality_metrics {
  id             String   @id @default(ulid())
  workspaceId    String   @db.VarChar(30)
  entityType     String   @db.VarChar(50)
  entityId       String   @db.VarChar(30)
  fieldName      String   @db.VarChar(100)
  qualityType    String   @db.VarChar(20)
  qualityScore   Float
  issueCount     Int      @default(0)
  issues         Json?
  lastChecked    DateTime @default(now())
  autoRemediated Boolean  @default(false)
  remediation    Json?
}

model demo_scenarios {
  id             String   @id @default(ulid())
  name           String
  slug           String
  description    String
  industry       String
  targetAudience String
  isActive       Boolean  @default(true)
  sortOrder      Int      @default(0)
  createdAt      DateTime @default(now())
  updatedAt      DateTime
  config         Json?
  branding       Json?
  features       Json?
  demoUser       Json?
}

model email_accounts {
  id                      String    @id @default(ulid())
  workspaceId             String
  userId                  String
  platform                String
  email                   String
  displayName             String
  isActive                Boolean   @default(true)
  lastSyncAt              DateTime  @default(now())
  syncStatus              String    @default("healthy")
  accessToken             String?
  refreshToken            String?
  expiresAt               DateTime?
  autoSync                Boolean   @default(true)
  syncFrequency           Int       @default(15)
  enableDeliveryTracking  Boolean   @default(true)
  enableSentimentAnalysis Boolean   @default(true)
  autoFollowUp            Boolean   @default(false)
  createdAt               DateTime  @default(now())
  updatedAt               DateTime
}

model email_messages {
  id                String   @id @default(ulid())
  messageId         String
  threadId          String?
  accountId         String
  subject           String
  body              String
  bodyHtml          String?
  from              String
  to                String[]
  cc                String[]
  bcc               String[]
  replyTo           String?
  sentAt            DateTime
  receivedAt        DateTime
  isRead            Boolean  @default(false)
  isImportant       Boolean  @default(false)
  labels            String[]
  attachments       Json?
  tracking          Json?
  createdAt         DateTime @default(now())
  updatedAt         DateTime
  buyingSignal      String?  @db.VarChar(100)
  buyingSignalScore Float?   @default(0.0)
}

model email_sequences {
  id          String   @id @default(ulid())
  workspaceId String
  userId      String
  name        String
  description String?
  isActive    Boolean  @default(true)
  steps       Json
  triggers    Json
  settings    Json
  stats       Json?
  createdAt   DateTime @default(now())
  updatedAt   DateTime
}

model entity_version_history {
  id           String   @id @default(ulid())
  workspaceId  String   @db.VarChar(30)
  entityType   String   @db.VarChar(50)
  entityId     String   @db.VarChar(30)
  version      Int
  changeType   String   @db.VarChar(20)
  fieldChanges Json
  changedBy    String   @db.VarChar(30)
  changeReason String?
  rollbackData Json?
  timestamp    DateTime @default(now())
}

model executive_contact {
  id                  String    @id @default(ulid())
  account_id          String?
  name                String
  title               String?
  role                String
  email               String?
  phone               String?
  linkedin_url        String?
  confidence_score    Int       @default(0)
  research_methods    String[]
  selection_reasoning String?
  last_verified       DateTime?
  is_current          Boolean   @default(true)
  workspace_id        String
  created_at          DateTime  @default(now())
  updated_at          DateTime
}

model interviews {
  id             String   @id @default(ulid())
  candidateId    String
  jobId          String
  type           String   @db.VarChar(50)
  scheduledDate  DateTime
  interviewer    String   @db.VarChar(255)
  feedback       String?
  rating         Int?
  recommendation String?  @db.VarChar(50)
  status         String   @default("scheduled") @db.VarChar(50)
  duration       Int?
  notes          String?
  createdAt      DateTime @default(now())
  updatedAt      DateTime
}

model job_applications {
  id              String   @id @default(ulid())
  candidateId     String
  jobId           String
  applicationDate DateTime @default(now())
  status          String   @default("applied") @db.VarChar(50)
  source          String?  @db.VarChar(100)
  coverLetter     String?
  resumeUrl       String?  @db.VarChar(500)
  notes           String?
  createdAt       DateTime @default(now())
  updatedAt       DateTime
}

model jobs {
  id                String    @id @default(ulid())
  title             String    @db.VarChar(255)
  department        String    @db.VarChar(100)
  level             String    @db.VarChar(50)
  type              String    @default("full-time") @db.VarChar(50)
  location          Json?
  salaryMin         Decimal?  @db.Decimal(10, 2)
  salaryMax         Decimal?  @db.Decimal(10, 2)
  currency          String    @default("USD") @db.VarChar(3)
  benefits          String[]  @default([])
  requirements      Json?
  description       String?
  status            String    @default("open") @db.VarChar(50)
  urgency           String    @default("medium") @db.VarChar(20)
  clientCompanyId   String?   @db.VarChar(30)
  clientCompanyName String?   @db.VarChar(255)
  recruiterAssigned String    @db.VarChar(30)
  hiringManager     String?   @db.VarChar(255)
  workspaceId       String    @db.VarChar(30)
  deadline          DateTime?
  createdAt         DateTime  @default(now())
  updatedAt         DateTime
}

model leads {
  id                  String          @id @default(ulid())
  workspaceId         String          @db.VarChar(30)
  assignedUserId      String?         @db.VarChar(30)
  firstName           String
  lastName            String
  fullName            String
  displayName         String?
  email               String?
  workEmail           String?
  personalEmail       String?
  phone               String?
  mobilePhone         String?
  workPhone           String?
  company             String?
  companyDomain       String?
  industry            String?
  companySize         String?
  jobTitle            String?
  title               String?
  department          String?
  linkedinUrl         String?
  address             String?
  city                String?
  state               String?
  country             String?
  postalCode          String?         @db.VarChar(20)
  status              String          @default("new") @db.VarChar(50)
  priority            String          @default("medium") @db.VarChar(30)
  source              String?
  estimatedValue      Float?
  currency            String          @default("USD") @db.VarChar(3)
  notes               String?
  description         String?
  tags                String[]        @default([])
  customFields        Json?
  preferredLanguage   String?         @db.VarChar(10)
  timezone            String?         @db.VarChar(50)
  lastEnriched        DateTime?
  enrichmentSources   String[]        @default([])
  emailVerified       Boolean         @default(false)
  phoneVerified       Boolean         @default(false)
  mobileVerified      Boolean         @default(false)
  enrichmentScore     Float?
  emailConfidence     Float?
  phoneConfidence     Float?
  dataCompleteness    Float?
  createdAt           DateTime        @default(now())
  updatedAt           DateTime
  personId            String?
  deletedAt           DateTime?
  buyerGroupRole      String?         @db.VarChar(50)
  completedStages     String[]        @default([])
  currentStage        String?         @db.VarChar(50)
  lastActionDate      DateTime?
  nextAction          String?
  nextActionDate      DateTime?
  relationship        String?         @db.VarChar(30)
  demoScenarioId      String?
  isDemoData          Boolean         @default(false)
  externalId          String?
  vertical            String?         @db.VarChar(50)
  zohoId              String?         @db.VarChar(50)
  authority           String?         @db.VarChar(30)
  avgResponseTime     Float?          @default(0)
  budget              Float?
  buyingSignals       String[]        @default([])
  communicationStyle  String?         @default("Professional") @db.VarChar(30)
  competitorMentions  String[]        @default([])
  dateOfBirth         DateTime?
  decisionMakingStyle String?         @default("Analytical") @db.VarChar(30)
  engagementLevel     String?         @default("low") @db.VarChar(20)
  hobbies             String[]        @default([])
  interests           String[]        @default([])
  lastContactDate     DateTime?
  marketingQualified  Boolean         @default(false)
  needUrgency         String?         @db.VarChar(30)
  nextFollowUpDate    DateTime?
  painPoints          String[]        @default([])
  personalGoals       String[]        @default([])
  professionalGoals   String[]        @default([])
  responseRate        Float?          @default(0)
  salesQualified      Boolean         @default(false)
  timeline            String?         @db.VarChar(30)
  touchPointsCount    Int             @default(0)
  workAnniversary     DateTime?
  accountId           String?         @db.VarChar(30)
  companyId           String?
  companyRelation     company?        @relation("CompanyToLeads", fields: [companyId], references: [id])
  person              person?         @relation(fields: [personId], references: [id])
  opportunities       opportunities[]
}

model notes {
  id            String   @id @default(ulid())
  workspaceId   String   @db.VarChar(30)
  authorId      String   @db.VarChar(30)
  leadId        String?  @db.VarChar(30)
  opportunityId String?  @db.VarChar(30)
  accountId     String?  @db.VarChar(30)
  contactId     String?  @db.VarChar(30)
  title         String?
  content       String
  summary       String?
  type          String   @default("general") @db.VarChar(20)
  priority      String   @default("normal") @db.VarChar(10)
  isPrivate     Boolean  @default(false)
  isPinned      Boolean  @default(false)
  format        String   @default("text") @db.VarChar(20)
  attachments   Json?
  tags          String[] @default([])
  createdAt     DateTime @default(now())
  updatedAt     DateTime
  externalId    String?
  prospectId    String?  @db.VarChar(30)
}

model opportunities {
  id                        String    @id @default(ulid())
  workspaceId               String    @db.VarChar(30)
  leadId                    String?   @db.VarChar(30)
  accountId                 String?   @db.VarChar(30)
  assignedUserId            String?   @db.VarChar(30)
  name                      String
  description               String?
  amount                    Float?
  currency                  String    @default("USD") @db.VarChar(3)
  probability               Float?    @default(0.5)
  stage                     String    @default("Build Rapport") @db.VarChar(100)
  priority                  String    @default("medium") @db.VarChar(30)
  source                    String?
  expectedCloseDate         DateTime?
  actualCloseDate           DateTime?
  notes                     String?
  nextSteps                 String?
  tags                      String[]  @default([])
  customFields              Json?
  riskScore                 Float?
  createdAt                 DateTime  @default(now())
  updatedAt                 DateTime
  deletedAt                 DateTime?
  buyingCommittee           Json?
  competitionData           Json?
  dealAnalysis              String?
  lastActivityDate          DateTime?
  nextActivityDate          DateTime?
  stageEntryDate            DateTime?
  demoScenarioId            String?
  isDemoData                Boolean   @default(false)
  externalId                String?
  zohoId                    String?   @db.VarChar(50)
  accelerationOpportunities String[]  @default([])
  champion                  String?
  championCoalition         Json?
  closePredictionConfidence Float?
  closePredictionReasoning  String?
  competitiveThreats        Json?
  decisionCriteria          Json?
  decisionProcess           Json?
  economicBuyer             String?
  economicImpact            Json?
  implementation            Json?
  intelligence              Json?
  lastPrecisionUpdate       DateTime?
  nextActions               Json?
  outcomePredict            Json?
  painPriority              Json?
  politicalMap              Json?
  precisionData             Json?
  precisionScore            Json?
  predictedCloseDate        DateTime?
  realityCheck              Json?
  riskFactors               String[]  @default([])
  solutionFit               Json?
  todayVsReality            Json?
  urgencyFactors            String[]  @default([])
  companyId                 String?
  personId                  String?
  accounts                  accounts? @relation(fields: [accountId], references: [id])
  users                     users?    @relation(fields: [assignedUserId], references: [id])
  company                   company?  @relation(fields: [companyId], references: [id])
  leads                     leads?    @relation(fields: [leadId], references: [id])
  person                    person?   @relation(fields: [personId], references: [id])
}

model partners {
  id                   String    @id @default(ulid())
  workspaceId          String    @db.VarChar(30)
  assignedUserId       String?   @db.VarChar(30)
  name                 String
  company              String?
  email                String?
  phone                String?
  website              String?
  linkedinUrl          String?
  industry             String?
  size                 String?
  country              String?
  city                 String?
  state                String?
  address              String?
  partnershipType      String    @default("Strategic") @db.VarChar(50)
  partnershipModel     String    @default("Channel Partner") @db.VarChar(50)
  partnershipStartDate DateTime?
  partnershipValue     String    @default("High") @db.VarChar(20)
  revenueShare         String    @default("20%") @db.VarChar(10)
  territory            String    @default("Regional") @db.VarChar(50)
  exclusivity          String    @default("Non-exclusive") @db.VarChar(20)
  performanceScore     Float     @default(85)
  partnerRevenue       Float     @default(0)
  revenueGrowth        Float     @default(0)
  dealsClosed          Int       @default(0)
  pipelineValue        Float     @default(0)
  winRate              Float     @default(0)
  avgDealSize          Float     @default(0)
  certificationLevel   String    @default("Silver Partner") @db.VarChar(30)
  salesCertified       Boolean   @default(false)
  techCertified        Boolean   @default(false)
  lastTrainingDate     DateTime?
  nextTrainingDate     DateTime?
  mdfAllocation        String    @default("$25K") @db.VarChar(20)
  coreCompetencies     String[]  @default([])
  serviceOfferings     String[]  @default([])
  keyStrengths         String[]  @default([])
  growthOpportunities  String[]  @default([])
  notes                String?
  tags                 String[]  @default([])
  customFields         Json?
  createdAt            DateTime  @default(now())
  updatedAt            DateTime
  deletedAt            DateTime?

  @@index([assignedUserId])
  @@index([partnershipType])
  @@index([workspaceId])
}

model prospects {
  id                  String    @id @default(ulid())
  workspaceId         String    @db.VarChar(30)
  assignedUserId      String?   @db.VarChar(30)
  zohoId              String?   @db.VarChar(50)
  firstName           String
  lastName            String
  fullName            String
  displayName         String?
  email               String?
  workEmail           String?
  personalEmail       String?
  phone               String?
  mobilePhone         String?
  workPhone           String?
  company             String?
  companyDomain       String?
  industry            String?
  vertical            String?   @db.VarChar(50)
  companySize         String?
  jobTitle            String?
  title               String?
  department          String?
  linkedinUrl         String?
  address             String?
  city                String?
  state               String?
  country             String?
  postalCode          String?   @db.VarChar(20)
  status              String    @default("engaged") @db.VarChar(50)
  priority            String    @default("medium") @db.VarChar(30)
  source              String?
  estimatedValue      Float?
  currency            String    @default("USD") @db.VarChar(3)
  notes               String?
  description         String?
  tags                String[]  @default([])
  customFields        Json?
  preferredLanguage   String?   @db.VarChar(10)
  timezone            String?   @db.VarChar(50)
  lastEnriched        DateTime?
  enrichmentSources   String[]  @default([])
  emailVerified       Boolean   @default(false)
  phoneVerified       Boolean   @default(false)
  mobileVerified      Boolean   @default(false)
  enrichmentScore     Float?
  emailConfidence     Float?
  phoneConfidence     Float?
  dataCompleteness    Float?
  engagementLevel     String    @default("initial") @db.VarChar(30)
  lastContactDate     DateTime?
  nextFollowUpDate    DateTime?
  touchPointsCount    Int       @default(0)
  responseRate        Float?
  avgResponseTime     Float?
  buyingSignals       String[]  @default([])
  painPoints          String[]  @default([])
  interests           String[]  @default([])
  budget              Float?
  authority           String?   @db.VarChar(30)
  needUrgency         String?   @db.VarChar(30)
  timeline            String?   @db.VarChar(30)
  competitorMentions  String[]  @default([])
  marketingQualified  Boolean   @default(false)
  salesQualified      Boolean   @default(false)
  createdAt           DateTime  @default(now())
  updatedAt           DateTime
  personId            String?
  deletedAt           DateTime?
  buyerGroupRole      String?   @db.VarChar(50)
  completedStages     String[]  @default([])
  currentStage        String?   @db.VarChar(50)
  lastActionDate      DateTime?
  nextAction          String?
  nextActionDate      DateTime?
  relationship        String?   @db.VarChar(30)
  demoScenarioId      String?
  isDemoData          Boolean   @default(false)
  externalId          String?
  communicationStyle  String?   @default("Professional") @db.VarChar(30)
  dateOfBirth         DateTime?
  decisionMakingStyle String?   @default("Analytical") @db.VarChar(30)
  hobbies             String[]  @default([])
  personalGoals       String[]  @default([])
  professionalGoals   String[]  @default([])
  workAnniversary     DateTime?
  companyId           String?
  companyRelation     company?  @relation("CompanyToProspects", fields: [companyId], references: [id])
  person              person?   @relation(fields: [personId], references: [id])
}

model realtime_subscriptions {
  id               String   @id @default(ulid())
  workspaceId      String   @db.VarChar(30)
  userId           String   @db.VarChar(30)
  sessionId        String   @db.VarChar(100)
  subscriptionType String   @db.VarChar(50)
  entityFilters    Json
  isActive         Boolean  @default(true)
  lastPing         DateTime @default(now())
  createdAt        DateTime @default(now())
  expiresAt        DateTime
}

model research_error {
  id            String   @id @default(ulid())
  session_id    String
  account_id    String?
  error_code    String
  error_message String
  module        String
  is_retryable  Boolean  @default(true)
  created_at    DateTime @default(now())
}

model research_session {
  id                 String    @id @default(ulid())
  account_ids        String[]
  target_roles       String[]
  research_depth     String
  status             String    @default("pending")
  progress           Int       @default(0)
  total_cost         Decimal   @default(0) @db.Decimal(10, 4)
  executives_found   Int       @default(0)
  confidence_avg     Int       @default(0)
  processing_time_ms Int       @default(0)
  research_methods   String[]
  user_id            String
  workspace_id       String
  created_at         DateTime  @default(now())
  completed_at       DateTime?
}

model speedrun_action_logs {
  id                String    @id @default(ulid())
  personId          String    @db.VarChar(50)
  personName        String    @db.VarChar(100)
  actionLog         String    @db.VarChar(200)
  type              String    @db.VarChar(20)
  notes             String?
  nextAction        String?   @db.VarChar(200)
  nextActionDate    DateTime?
  workspaceId       String    @db.VarChar(30)
  userId            String    @db.VarChar(30)
  timestamp         DateTime  @default(now())
  actionPerformedBy String?   @db.VarChar(30)
}

model speedrun_daily_progress {
  id               String   @id @default(ulid())
  userId           String   @db.VarChar(30)
  workspaceId      String   @db.VarChar(30)
  date             DateTime @db.Date
  targetCount      Int      @default(100)
  completedCount   Int      @default(0)
  viewedCount      Int      @default(0)
  skippedCount     Int      @default(0)
  completedLeadIds String[] @default([])
  viewedLeadIds    String[] @default([])
  skippedLeadIds   String[] @default([])
  isComplete       Boolean  @default(false)
  lastActivity     DateTime @default(now())
}

model speedrun_lead_interactions {
  id              String   @id @default(ulid())
  leadId          String   @db.VarChar(50)
  userId          String   @db.VarChar(30)
  workspaceId     String   @db.VarChar(30)
  interactionType String   @db.VarChar(30)
  actionTaken     String?  @db.VarChar(200)
  outcome         String?  @db.VarChar(100)
  timestamp       DateTime @default(now())
}

model strategic_action_outcomes {
  id              String   @id @default(ulid())
  workspaceId     String
  leadId          String?
  companyId       String?
  actionType      String
  actionData      Json
  outcome         String
  outcomeValue    Float?
  confidenceScore Float
  businessStage   String
  kpiCategory     String
  createdAt       DateTime @default(now())
  updatedAt       DateTime
  prospectId      String?
}

model strategic_insights {
  id                 String   @id @default(ulid())
  workspaceId        String
  insightType        String
  title              String
  description        String
  businessStage      String
  kpiCategory        String
  impactPotential    Float
  confidence         Float
  actionable         Boolean
  supportingData     Json
  recommendedActions Json
  status             String
  createdAt          DateTime @default(now())
  updatedAt          DateTime
}

model strategic_weights {
  id             String   @id @default(ulid())
  workspaceId    String
  actionType     String
  contextFactors Json
  businessStage  String
  kpiCategory    String
  weight         Float
  confidence     Float
  sampleSize     Int
  lastUpdated    DateTime @default(now())
  createdAt      DateTime @default(now())
}

model user_ai_preferences {
  id                   String    @id @default(ulid())
  userId               String    @db.VarChar(30)
  workspaceId          String    @db.VarChar(30)
  personalityId        String    @default("balanced") @db.VarChar(50)
  personalityName      String    @default("Balanced Professional") @db.VarChar(100)
  customPrompt         String?
  tone                 String    @default("helpful and professional") @db.VarChar(100)
  style                String    @default("balanced") @db.VarChar(50)
  isActive             Boolean   @default(true)
  createdAt            DateTime  @default(now())
  updatedAt            DateTime
  communicationSamples Json?
  lastStyleUpdate      DateTime?
  persistentMemory     String?
  useEmojis            Boolean   @default(false)
  writingStyleAnalysis String?
  writingStylePrompt   String?
}

model users {
  id                      String          @id @default(ulid())
  email                   String
  password                String?
  name                    String
  firstName               String?
  lastName                String?
  displayName             String?
  preferredLanguage       String          @default("en") @db.VarChar(10)
  countryCode             String?         @db.VarChar(2)
  timezone                String?         @db.VarChar(50)
  locale                  String?         @db.VarChar(10)
  textDirection           String          @default("ltr") @db.VarChar(3)
  address                 String?
  city                    String?
  state                   String?
  country                 String?
  postalCode              String?         @db.VarChar(20)
  bio                     String?
  notes                   String?
  createdAt               DateTime        @default(now())
  updatedAt               DateTime
  lastLoginAt             DateTime?
  externalId              String?
  isSSO                   Boolean         @default(false)
  isActive                Boolean         @default(true)
  scimSource              String?
  lastSyncAt              DateTime?
  ssoProviderId           String?
  resetToken              String?
  resetTokenExpiry        DateTime?
  communicationStyle      String?         @default("consultative") @db.VarChar(30)
  coreSignalCreditsLimit  Int?            @default(500)
  coreSignalCreditsUsed   Int?            @default(0)
  coreSignalLastReset     DateTime?       @default(now())
  dashboardConfig         Json?           @default("{\"kpis\": [], \"widgets\": [], \"defaultView\": \"speedrun\"}")
  department              String?         @db.VarChar(50)
  intelligenceFocus       Json?           @default("{\"buyingSignals\": true, \"competitorMentions\": false, \"stakeholderMapping\": true}")
  linkedinUrl             String?         @db.VarChar(255)
  manager                 String?         @db.VarChar(30)
  notificationPreferences Json?           @default("{\"urgency\": \"medium\", \"channels\": [\"in_app\"], \"frequency\": \"hourly\"}")
  phoneNumber             String?         @db.VarChar(20)
  preferredDetailLevel    String?         @default("detailed") @db.VarChar(20)
  profilePictureUrl       String?         @db.VarChar(255)
  quota                   Decimal?        @db.Decimal(15, 2)
  seniorityLevel          String?         @db.VarChar(20)
  startDate               DateTime?
  territory               String?         @db.VarChar(100)
  title                   String?         @db.VarChar(100)
  activeWorkspaceId       String?         @db.VarChar(30)
  opportunities           opportunities[]
  activeWorkspace         workspaces?     @relation("UserActiveWorkspace", fields: [activeWorkspaceId], references: [id])
}

model webhook_subscriptions {
  id             String    @id @default(ulid())
  accountId      String
  platform       String
  subscriptionId String
  isActive       Boolean   @default(true)
  expiresAt      DateTime?
  createdAt      DateTime  @default(now())
  updatedAt      DateTime
}

model workspace_users {
  id          String   @id @default(ulid())
  workspaceId String   @db.VarChar(30)
  userId      String   @db.VarChar(30)
  role        String   @default("member") @db.VarChar(20)
  createdAt   DateTime @default(now())
  updatedAt   DateTime
}

model workspaces {
  id                   String   @id @default(ulid())
  name                 String
  slug                 String
  defaultLanguage      String   @default("en") @db.VarChar(10)
  supportedLanguages   String[] @default(["en"])
  timezone             String   @default("UTC") @db.VarChar(50)
  description          String?
  currency             String   @default("USD") @db.VarChar(3)
  dateFormat           String   @default("MM/dd/yyyy") @db.VarChar(20)
  numberFormat         String   @default("1,234.56") @db.VarChar(20)
  createdAt            DateTime @default(now())
  updatedAt            DateTime
  companyId            String?
  bundleId             String?
  auditRetentionDays   Int?     @default(90)
  primaryRegion        String?
  complianceFrameworks Json?
  subscriptionTier     String?
  subscriptionStatus   String?
  scimEnabled          Boolean  @default(false)
  ssoEnabled           Boolean  @default(false)
  allowedRegions       String[] @default([])
  logoUrl              String?  @db.VarChar(255)
  primaryColor         String?  @db.VarChar(7)
  secondaryColor       String?  @db.VarChar(7)
  activeUsers          users[]  @relation("UserActiveWorkspace")
}

model company {
  id            String          @id
  name          String
  website       String?
  industry      String?
  size          String?
  description   String?
  headquarters  String?
  foundedYear   Int?
  revenue       String?
  employeeCount String?
  isPublic      Boolean?
  stockSymbol   String?
  logoUrl       String?
  isActive      Boolean         @default(true)
  createdAt     DateTime        @default(now())
  updatedAt     DateTime
  accounts      accounts[]
  clients       clients[]
  leads         leads[]         @relation("CompanyToLeads")
  opportunities opportunities[]
  prospects     prospects[]     @relation("CompanyToProspects")

  @@index([industry])
  @@index([isActive])
  @@index([name])
}

model person {
  id                String          @id
  firstName         String?
  lastName          String?
  fullName          String
  email             String?         @unique
  phone             String?
  linkedinUrl       String?
  title             String?
  department        String?
  location          String?
  bio               String?
  profilePictureUrl String?
  isActive          Boolean         @default(true)
  createdAt         DateTime        @default(now())
  updatedAt         DateTime
  clients           clients[]
  contacts          contacts[]
  leads             leads[]
  opportunities     opportunities[]
  prospects         prospects[]

  @@index([email])
  @@index([fullName])
  @@index([isActive])
}

model Chat {
  id          String   @id @default(cuid())
  workspaceId String
  type        String
  name        String?
  description String?
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt

  @@index([workspaceId])
  @@index([type])
  @@index([workspaceId, type])
}

model ChatMember {
  id       String   @id @default(cuid())
  chatId   String
  userId   String
  role     String   @default("member")
  joinedAt DateTime @default(now())

  @@unique([chatId, userId])
  @@index([userId])
  @@index([chatId])
}

model Message {
  id        String   @id @default(cuid())
  chatId    String
  senderId  String
  content   String
  type      String   @default("text")
  metadata  Json?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@index([chatId])
  @@index([senderId])
  @@index([createdAt])
}

model calendar {
  id          String    @id @default(ulid())
  workspaceId String    @db.VarChar(30)
  userId      String    @db.VarChar(30)
  name        String
  description String?
  color       String?   @default("#4285f4") @db.VarChar(7)
  isPrimary   Boolean   @default(false)
  isActive    Boolean   @default(true)
  platform    String    @default("microsoft") @db.VarChar(20)
  externalId  String?
  syncToken   String?
  lastSyncAt  DateTime?
  createdAt   DateTime  @default(now())
  updatedAt   DateTime

  @@index([workspaceId])
  @@index([userId])
  @@index([platform])
  @@index([externalId])
}

model events {
  id             String    @id @default(ulid())
  workspaceId    String    @db.VarChar(30)
  userId         String    @db.VarChar(30)
  calendarId     String    @db.VarChar(30)
  title          String
  description    String?
  location       String?
  startTime      DateTime
  endTime        DateTime
  isAllDay       Boolean   @default(false)
  isRecurring    Boolean   @default(false)
  recurrenceRule String?
  status         String    @default("confirmed") @db.VarChar(20)
  visibility     String    @default("default") @db.VarChar(20)
  platform       String    @default("microsoft") @db.VarChar(20)
  externalId     String?
  meetingUrl     String?
  attendees      Json?
  organizer      Json?
  reminders      Json?
  attachments    Json?
  createdAt      DateTime  @default(now())
  updatedAt      DateTime
  syncedAt       DateTime?

  @@index([workspaceId])
  @@index([userId])
  @@index([calendarId])
  @@index([startTime])
  @@index([endTime])
  @@index([platform])
  @@index([externalId])
  @@index([status])
}

model EventToContact {
  A String
  B String

  @@id([A, B], map: "_EventToContact_AB_pkey")
  @@map("_EventToContact")
}

model EventToAccount {
  A String
  B String

  @@id([A, B], map: "_EventToAccount_AB_pkey")
  @@map("_EventToAccount")
}

model EventToLead {
  A String
  B String

  @@id([A, B], map: "_EventToLead_AB_pkey")
  @@map("_EventToLead")
}

model EventToOpportunity {
  A String
  B String

  @@id([A, B], map: "_EventToOpportunity_AB_pkey")
  @@map("_EventToOpportunity")
}

model EventToProspect {
  A String
  B String

  @@id([A, B], map: "_EventToProspect_AB_pkey")
  @@map("_EventToProspect")
}

model EventToPerson {
  A String
  B String

  @@id([A, B], map: "_EventToPerson_AB_pkey")
  @@map("_EventToPerson")
}

model EventToCompany {
  A String
  B String

  @@id([A, B], map: "_EventToCompany_AB_pkey")
  @@map("_EventToCompany")
}
